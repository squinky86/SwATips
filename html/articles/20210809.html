<!DOCTYPE html>
<html xml:lang='en-US' lang='en-US'>
<head>
<title>Ada <del>Low</del>High Integrity Profiles</title>
 

<meta charset="utf-8"/>
 

<meta content="TeX4ht (https://tug.org/tex4ht/)" name="generator"/>
 

<meta content="width=device-width,initial-scale=1" name="viewport"/>
 

 

<meta content="article.tex" name="src"/>
 

<script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4110907817782130" crossorigin="anonymous"></script>
<style>
 
/* start css.sty */
.rm-lmbx-12x-x-144{font-size:172%; font-weight: bold;}
.rm-lmr-12{font-size:120%;}
.rm-lmr-9{font-size:90%;}
.ec-lmtt-10{ font-family: monospace,monospace;}
.rm-lmr-8{font-size:80%;}
.rm-lmcsc-10{font-variant: small-caps;}
p{margin-top:0;margin-bottom:0}
p.indent{text-indent:0;}
p + p{margin-top:1em;}
p + div, p + pre {margin-top:1em;}
div + p, pre + p {margin-top:1em;}
a { overflow-wrap: break-word; word-wrap: break-word; word-break: break-word; hyphens: auto; }
@media print {div.crosslinks {visibility:hidden;}}
a img { border-top: 0; border-left: 0; border-right: 0; }
center { margin-top:1em; margin-bottom:1em; }
td center { margin-top:0em; margin-bottom:0em; }
.Canvas { position:relative; }
img.math{vertical-align:middle;}
div.par-math-display, div.math-display{text-align:center;}
li p.indent { text-indent: 0em }
li p:first-child{ margin-top:0em; }
li p:last-child, li div:last-child { margin-bottom:0.5em; }
li p~ul:last-child, li p~ol:last-child{ margin-bottom:0.5em; }
.enumerate1 {list-style-type:decimal;}
.enumerate2 {list-style-type:lower-alpha;}
.enumerate3 {list-style-type:lower-roman;}
.enumerate4 {list-style-type:upper-alpha;}
div.newtheorem { margin-bottom: 2em; margin-top: 2em;}
.obeylines-h,.obeylines-v {white-space: nowrap; }
div.obeylines-v p { margin-top:0; margin-bottom:0; }
.overline{ text-decoration:overline; }
.overline img{ border-top: 1px solid black; }
td.displaylines {text-align:center; white-space:nowrap;}
.centerline {text-align:center;}
.rightline {text-align:right;}
pre.verbatim {font-family: monospace,monospace; text-align:left; clear:both; }
.fbox {padding-left:3.0pt; padding-right:3.0pt; text-indent:0pt; border:solid black 0.4pt; }
div.fbox {display:table}
div.center div.fbox {text-align:center; clear:both; padding-left:3.0pt; padding-right:3.0pt; text-indent:0pt; border:solid black 0.4pt; }
div.minipage{width:100%;}
div.center, div.center div.center {text-align: center; margin-left:1em; margin-right:1em;}
div.center div {text-align: left;}
div.flushright, div.flushright div.flushright {text-align: right;}
div.flushright div {text-align: left;}
div.flushleft {text-align: left;}
.underline{ text-decoration:underline; }
.underline img{ border-bottom: 1px solid black; margin-bottom:1pt; }
.framebox-c, .framebox-l, .framebox-r { padding-left:3.0pt; padding-right:3.0pt; text-indent:0pt; border:solid black 0.4pt; }
.framebox-c {text-align:center;}
.framebox-l {text-align:left;}
.framebox-r {text-align:right;}
span.thank-mark{ vertical-align: super }
span.footnote-mark sup.textsuperscript, span.footnote-mark a sup.textsuperscript{ font-size:80%; }
div.footnotes{border-top:solid 1px black; border-bottom:solid 1px black; padding-bottom:1ex; padding-top:0.5ex; margin-right:15%; margin-top:2ex; font-style:italic; font-size:85%;}
div.footnotes p{margin-top:0; margin-bottom:0; text-indent:0;}
div.tabular, div.center div.tabular {text-align: center; margin-top:0.5em; margin-bottom:0.5em; }
table.tabular td p{margin-top:0em;}
table.tabular {margin-left: auto; margin-right: auto;}
td p:first-child{ margin-top:0em; }
td p:last-child{ margin-bottom:0em; }
div.td00{ margin-left:0pt; margin-right:0pt; }
div.td01{ margin-left:0pt; margin-right:5pt; }
div.td10{ margin-left:5pt; margin-right:0pt; }
div.td11{ margin-left:5pt; margin-right:5pt; }
table[rules] {border-left:solid black 0.4pt; border-right:solid black 0.4pt; }
td.td00{ padding-left:0pt; padding-right:0pt; }
td.td01{ padding-left:0pt; padding-right:5pt; }
td.td10{ padding-left:5pt; padding-right:0pt; }
td.td11{ padding-left:5pt; padding-right:5pt; }
table[rules] {border-left:solid black 0.4pt; border-right:solid black 0.4pt; }
.hline hr, .cline hr{ height : 0px; margin:0px; }
.hline td, .cline td{ padding: 0; }
.hline hr, .cline hr{border:none;border-top:1px solid black;}
.tabbing-right {text-align:right;}
div.float, div.figure {margin-left: auto; margin-right: auto;}
div.float img {text-align:center;}
div.figure img {text-align:center;}
.marginpar,.reversemarginpar {width:20%; float:right; text-align:left; margin-left:auto; margin-top:0.5em; font-size:85%; text-decoration:underline;}
.marginpar p,.reversemarginpar p{margin-top:0.4em; margin-bottom:0.4em;}
.reversemarginpar{float:left;}
table.equation {width:100%;}
.equation td{text-align:center; }
td.equation { margin-top:1em; margin-bottom:1em; } 
td.equation-label { width:5%; text-align:center; }
td.eqnarray4 { width:5%; white-space: normal; }
td.eqnarray2 { width:5%; }
table.eqnarray-star, table.eqnarray {width:100%;}
div.eqnarray{text-align:center;}
div.array {text-align:center;}
div.pmatrix {text-align:center;}
table.pmatrix {width:100%;}
span.pmatrix img{vertical-align:middle;}
div.pmatrix {text-align:center;}
table.pmatrix {width:100%;}
span.bar-css {text-decoration:overline;}
table.tabular{border-collapse: collapse; border-spacing: 0;}
img.cdots{vertical-align:middle;}
.partToc a, .partToc, .likepartToc a, .likepartToc {line-height: 200%; font-weight:bold; font-size:110%;}
.chapterToc a, .chapterToc, .likechapterToc a, .likechapterToc, .appendixToc a, .appendixToc {line-height: 200%; font-weight:bold;}
.index-item, .index-subitem, .index-subsubitem {display:block}
div.caption {text-indent:-2em; margin-left:3em; margin-right:1em; text-align:left;}
div.caption span.id{font-weight: bold; white-space: nowrap; }
h1.partHead{text-align: center}
p.bibitem { text-indent: -2em; margin-left: 2em; margin-top:0.6em; margin-bottom:0.6em; }
p.bibitem-p { text-indent: 0em; margin-left: 2em; margin-top:0.6em; margin-bottom:0.6em; }
.paragraphHead, .likeparagraphHead { margin-top:2em; font-weight: bold;}
.subparagraphHead, .likesubparagraphHead { font-weight: bold;}
.verse{white-space:nowrap; margin-left:2em}
div.maketitle {text-align:center;}
h2.titleHead{text-align:center;}
div.maketitle{ margin-bottom: 2em; }
div.author, div.date {text-align:center;}
div.thanks{text-align:left; margin-left:10%; font-size:85%; font-style:italic; }
div.abstract p {margin-left:5%; margin-right:5%;}
div.abstract {width:100%;}
.abstracttitle{text-align:center;margin-bottom:1em;}
figure.float, div.figure {margin-left: auto; margin-right: auto;}
figure.float img, figure.figure img {display: block; margin-left: auto; margin-right: auto;}
figure.figure {text-align:center;}
figcaption.caption {text-indent:-2em; margin-left:3em; margin-right:1em; text-align:center;}
figcaption.caption span.id{font-weight: bold; white-space: nowrap; }
.abstract{margin:1em;}
dt.printshorthands{float:left; clear:left; margin-right:1em;}
dd.thebibliography {margin-left: 2.5em;}
dt.thebibliography {float:left; clear:left; margin-right:1em;}
.lstlisting .label{margin-right:0.5em; }
div.lstlisting{font-family: monospace,monospace; white-space: nowrap; margin-top:0.5em; margin-bottom:0.5em; }
div.lstinputlisting{ font-family: monospace,monospace; white-space: nowrap; }
.lstinputlisting .label{margin-right:0.5em;}
.small-caps{font-variant: small-caps;}
.uline{ text-decoration:underline; }
.uuline{ text-decoration:underline; }
span.sout {text-decoration: line-through }
span.xout {text-decoration: line-through }
span.uwave {text-decoration:underline }
/* end css.sty */

</style>
</head>
<body>
<p>Return to <a href="../">SwATips</a> | <a href="20210809.pdf">pdf</a> | <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img src="images/by.svg" width="60" height="21" alt="CC-BY" /></a></p>
<div class='maketitle'>
                                                                                         
                                                                                         
                                                                                         
                                                                                         

<h2 class='titleHead'> <strong>Software Assurance Tips</strong><br />
A product of the Software Assurance Tips Team[<a href='#cite.0@swatips'>4</a>]<br />
</h2>
<div class='author'><span class='rm-lmr-12'>Kevin Keen</span></div><br />
<div class='date'><span class='rm-lmr-12'>Monday 9</span><sup class='textsuperscript'><span class='rm-lmr-9'>th</span></sup><span class='rm-lmr-12'> August, 2021</span></div>
</div>
                                                                                         
                                                                                         
   
<h3 class='sectionHead'><span class='titlemark'>1   </span> <a id='x1-10001'></a>Ada <span class='sout'>Low</span>High Integrity Profiles</h3>
<!-- l. 42 --><p class='noindent'><span class='rm-lmr-8'>Updated Friday 6</span><sup class='textsuperscript'><span class='rm-lmr-9'>th</span></sup><span class='rm-lmr-8'> August, 2021</span>
</p><!-- l. 1 --><p class='indent'>   Ada is often touted by its supporters as the best programming language ever devised by man. And at least on a
conceptual level there are some good arguments in its favor. But as with any complex programming language there
are corner cases that should be understood and dealt with carefully to avoid those advantages turning into
disadvantages.
</p><!-- l. 3 --><p class='indent'>   Enter the Ada High Integrity Profiles. What are these mysterious profiles? With a name like “high integrity”
they must be good. And if Ada itself is already the best programming language, then high integrity Ada must be the
best of the best, right? Not so fast! As we will see, you may want to avoid these profiles unless you absolutely need
them!
</p><!-- l. 5 --><p class='indent'>   Profiles in Ada came out of the 1997 International Real-Time Ada Workshop. The <span class='ec-lmtt-10'>Ravenscar </span>Profile was
intended to produce a more lightweight (and provably correct) executable with task scheduling that was more
suited to real time applications. It was revised, and eventually included as part of the Ada standard
in 2005.[<a href='#cite.0@20210809:grm'>1</a>, § 2.140, p. 71–74] There are several versions of <span class='ec-lmtt-10'>Ravenscar </span>including <span class='ec-lmtt-10'>ravenscar-cert</span>,
<span class='ec-lmtt-10'>ravenscar-zfp</span>, and more. Each variant of a profile has different restrictions on what is and is not allowed using
that runtime system. The most restrictive are the Zero Footprint Profiles (ZFP). These profiles go
to great lengths to make sure that the resulting executable does not link against the Ada runtime
library. As such, they offer the least “bulk” in the binary image, but also the fewest features. One step
above the ZFPs are the “cert” variants, which are intended for profiles that have undergone a separate
certification.
</p><!-- l. 7 --><p class='indent'>   Of particular note is the way in which exceptions are handled. Since all of these profiles are attempting to reduce
memory footprint, the handling of exceptions is also reduced. The ZFPs in particular have the least exception
handling. Exceptions still happen (including user defined), but they must be handled locally. No traditional
exception propagation happens in ZFP. There is a “last chance handler” that will be called if an exception is not
handled locally.[<a href='#cite.0@20210809:gnathie'>3</a>, § 4.2.6] In ZFP, this handler must be implemented by the programmer, and the compiler will
enforce its existence.
</p><!-- l. 9 --><p class='indent'>   Beyond exceptions, there is an entire gamut of Ada features that are excluded in these profiles.[<a href='#cite.0@20210809:gnathie'>3</a>, § 4.2.2] One
that was particularly interesting is the restriction on non-library level tagged types. Tagged or managed types are of
particular importance to us for code review. Tagged types will automatically have their <span class='ec-lmtt-10'>Initialize </span>procedure
called when an object of that type is constructed without an initial value (think constructor but not quite).[<a href='#cite.0@20210809:adap'>6</a>]
Without that guaranteed initialization, more complex projects that have to be segmented in order to be
analyzed by adacore wind up with tons of false positives about possibly un-initalized variables. We had
heard of a company whose Ada programming standard deliberately avoided the use of tagged types. It
made little sense to us for them to avoid tagged types until we learned about these profiles and their
restrictions.
</p><!-- l. 11 --><p class='indent'>   When Ada is written against embedded systems, it is not uncommon for us to see the use of VxWorks. There are
a set of runtime systems and associated profiles for various versions of VxWorks. For this tip, the salient points of
profiles in general still apply. It is worth noting that the “cert” version of the VxWorks profiles do come with a
default last chance handler that by default will print the stack, raise an <span class='ec-lmtt-10'>APEX </span>exception and exit.[<a href='#cite.0@20210809:gnatugx'>2</a>, § A,
Replacement of the Default Last Chance Handler]
</p><!-- l. 13 --><p class='indent'>   While none of these restrictions are a security concern in and of themselves, it does beg for care to be taken.
When combined with the “continue running at any cost” mentality that we see quite often one could see a scenario
where exceptions effectively go unhandled. Code using <span class='ec-lmtt-10'>cert </span>or <span class='ec-lmtt-10'>zfp </span>profiles, combined with a last chance handler
that swallows exceptions, could render an application unstable and vulnerable. Documentation states that all last
chance handlers must effectively terminate the application,[<a href='#cite.0@20210809:gnathie'>3</a>, § 3.1] but makes no statement that this is
enforced. We often see the sin of catching top level exceptions[<a href='#cite.0@20210809:viega200924'>5</a>, p. 159] with the mindset of “continue
running at any cost.” It is just as much of a concern under these conditions as it would be in C++
code.
</p><!-- l. 15 --><p class='indent'>   As a bonus tip, note that even MORE risky code can be obtained with the pragmas <span class='ec-lmtt-10'>No_Exception_Handlers</span>
and <span class='ec-lmtt-10'>No_Exceptions</span>. The <span class='ec-lmtt-10'>No_Exception_Handlers </span>pragma disallows all exception handlers except
for the last chance handler. The <span class='ec-lmtt-10'>No_Exceptions </span>pragma disables runtime exceptions entirely![<a href='#cite.0@20210809:gnathie'>3</a>, §
3.1]
                                                                                         
                                                                                         
</p>   
<h3 class='sectionHead'><a id='x1-20001'></a>References</h3>
<!-- l. 47 --><p class='noindent'>    
</p>
<dl class='thebibliography'><dt id='X0-20210809:grm' class='thebibliography'>
[1]  
</dt><dd id='bib-1' class='thebibliography'>
<!-- l. 47 --><p class='noindent'><a id='cite.0@20210809:grm'></a>AdaCore.    GNAT Reference Manual.    Tech.    rep.    Free    Software    Foundation,    2020.    <span class='small-caps'>url</span>:
<a href='https://gcc.gnu.org/onlinedocs/gcc-11.2.0/gnat_rm.pdf' class='url'><span class='ec-lmtt-10'>https://gcc.gnu.org/onlinedocs/gcc-11.2.0/gnat_rm.pdf</span></a>.
</p>    
</dd>
<dt id='X0-20210809:gnatugx' class='thebibliography'>
[2]  
</dt><dd id='bib-2' class='thebibliography'>
<!-- l. 47 --><p class='noindent'><a id='cite.0@20210809:gnatugx'></a>AdaCore.                     GNAT User’s Guide Supplement for Cross Platforms.                     Aug. 5,
2021. <span class='small-caps'>url</span>: <a href='https://docs.adacore.com/gnat_ugx-docs/html/gnat_ugx/gnat_ugx.html' class='url'><span class='ec-lmtt-10'>https://docs.adacore.com/gnat_ugx-docs/html/gnat_ugx/gnat_ugx.html</span></a> (visited on
08/06/2021).
</p>    
</dd>
<dt id='X0-20210809:gnathie' class='thebibliography'>
[3]  
</dt><dd id='bib-3' class='thebibliography'>
<!-- l. 47 --><p class='noindent'><a id='cite.0@20210809:gnathie'></a>AdaCore.
GNAT User’s Guide Supplement for GNAT Pro Safety-Critical and GNAT Pro High-Security
.
Oct. 17,                                                                                                                     2018.
<span class='small-caps'>url</span>: <a href='https://docs.adacore.com/gnathie_ug-docs/html/gnathie_ug/gnathie_ug.html' class='url'><span class='ec-lmtt-10'>https://docs.adacore.com/gnathie_ug-docs/html/gnathie_ug/gnathie_ug.html</span></a> (visited on
08/06/2021).
</p>    
</dd>
<dt id='X0-swatips' class='thebibliography'>
[4]  
</dt><dd id='bib-4' class='thebibliography'>
<!-- l. 47 --><p class='noindent'><a id='cite.0@swatips'></a>Jon Hood, ed. SwATips. <a href='https://www.SwATips.com/' class='url'><span class='ec-lmtt-10'>https://www.SwATips.com/</span></a>.
</p>    
</dd>
<dt id='X0-20210809:viega200924' class='thebibliography'>
[5]  
</dt><dd id='bib-5' class='thebibliography'>
<!-- l. 47 --><p class='noindent'><a id='cite.0@20210809:viega200924'></a>John                                 Viega,                                 Michael                                 Howard,
and David LeBlanc. 24 Deadly Sins of Software Security. Programming Flaws and How to Fix Them.
McGraw-Hill Education, 2009. <span class='small-caps'>isbn</span>: 978-0-07-162675-0.
</p>    
</dd>
<dt id='X0-20210809:adap' class='thebibliography'>
[6]  
</dt><dd id='bib-6' class='thebibliography'>
<!-- l. 47 --><p class='noindent'><a id='cite.0@20210809:adap'></a>Wikibooks. Ada Programming/Object Orientation — Wikibooks, The Free Textbook Project. 2021. <span class='small-caps'>url</span>:
<a href='https://en.wikibooks.org/w/index.php?title=Ada_Programming/Object_Orientation&amp;oldid=3956556#Constructors' class='url'><span class='ec-lmtt-10'>https://en.wikibooks.org/w/index.php?title=Ada_Programming/Object_Orientation&amp;oldid=3956556#Constructors</span></a>
(visited on 08/06/2021).</p></dd></dl>
 
</body> 
</html>