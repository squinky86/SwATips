<!DOCTYPE html>
<html xml:lang='en-US' lang='en-US'>
<head>
<title>GCC as a Static Analysis Tool</title>
 

<meta charset="utf-8"/>
 

<meta name="generator" content="TeX4ht (https://tug.org/tex4ht/)"/>
 

<meta name="viewport" content="width=device-width,initial-scale=1"/>
 

 

<meta name="src" content="article.tex"/>
 

<script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4110907817782130" crossorigin="anonymous"></script>
<style>
 
/* start css.sty */
.rm-lmbx-12x-x-144{font-size:172%; font-weight: bold;}
.rm-lmr-12{font-size:120%;}
.rm-lmr-9{font-size:90%;}
.ec-lmtt-10{ font-family: monospace,monospace;}
.rm-lmr-8{font-size:80%;}
.rm-lmcsc-10{font-variant: small-caps;}
p{margin-top:0;margin-bottom:0}
p.indent{text-indent:0;}
p + p{margin-top:1em;}
p + div, p + pre {margin-top:1em;}
div + p, pre + p {margin-top:1em;}
a { overflow-wrap: break-word; word-wrap: break-word; word-break: break-word; hyphens: auto; }
@media print {div.crosslinks {visibility:hidden;}}
a img { border-top: 0; border-left: 0; border-right: 0; }
center { margin-top:1em; margin-bottom:1em; }
td center { margin-top:0em; margin-bottom:0em; }
.Canvas { position:relative; }
img.math{vertical-align:middle;}
div.par-math-display, div.math-display{text-align:center;}
li p.indent { text-indent: 0em }
li p:first-child{ margin-top:0em; }
li p:last-child, li div:last-child { margin-bottom:0.5em; }
li p~ul:last-child, li p~ol:last-child{ margin-bottom:0.5em; }
.enumerate1 {list-style-type:decimal;}
.enumerate2 {list-style-type:lower-alpha;}
.enumerate3 {list-style-type:lower-roman;}
.enumerate4 {list-style-type:upper-alpha;}
div.newtheorem { margin-bottom: 2em; margin-top: 2em;}
.obeylines-h,.obeylines-v {white-space: nowrap; }
div.obeylines-v p { margin-top:0; margin-bottom:0; }
.overline{ text-decoration:overline; }
.overline img{ border-top: 1px solid black; }
td.displaylines {text-align:center; white-space:nowrap;}
.centerline {text-align:center;}
.rightline {text-align:right;}
pre.verbatim {font-family: monospace,monospace; text-align:left; clear:both; }
.fbox {padding-left:3.0pt; padding-right:3.0pt; text-indent:0pt; border:solid black 0.4pt; }
div.fbox {display:table}
div.center div.fbox {text-align:center; clear:both; padding-left:3.0pt; padding-right:3.0pt; text-indent:0pt; border:solid black 0.4pt; }
div.minipage{width:100%;}
div.center, div.center div.center {text-align: center; margin-left:1em; margin-right:1em;}
div.center div {text-align: left;}
div.flushright, div.flushright div.flushright {text-align: right;}
div.flushright div {text-align: left;}
div.flushleft {text-align: left;}
.underline{ text-decoration:underline; }
.underline img{ border-bottom: 1px solid black; margin-bottom:1pt; }
.framebox-c, .framebox-l, .framebox-r { padding-left:3.0pt; padding-right:3.0pt; text-indent:0pt; border:solid black 0.4pt; }
.framebox-c {text-align:center;}
.framebox-l {text-align:left;}
.framebox-r {text-align:right;}
span.thank-mark{ vertical-align: super }
span.footnote-mark sup.textsuperscript, span.footnote-mark a sup.textsuperscript{ font-size:80%; }
div.footnotes{border-top:solid 1px black; border-bottom:solid 1px black; padding-bottom:1ex; padding-top:0.5ex; margin-right:15%; margin-top:2ex; font-style:italic; font-size:85%;}
div.footnotes p{margin-top:0; margin-bottom:0; text-indent:0;}
div.tabular, div.center div.tabular {text-align: center; margin-top:0.5em; margin-bottom:0.5em; }
table.tabular td p{margin-top:0em;}
table.tabular {margin-left: auto; margin-right: auto;}
td p:first-child{ margin-top:0em; }
td p:last-child{ margin-bottom:0em; }
div.td00{ margin-left:0pt; margin-right:0pt; }
div.td01{ margin-left:0pt; margin-right:5pt; }
div.td10{ margin-left:5pt; margin-right:0pt; }
div.td11{ margin-left:5pt; margin-right:5pt; }
table[rules] {border-left:solid black 0.4pt; border-right:solid black 0.4pt; }
td.td00{ padding-left:0pt; padding-right:0pt; }
td.td01{ padding-left:0pt; padding-right:5pt; }
td.td10{ padding-left:5pt; padding-right:0pt; }
td.td11{ padding-left:5pt; padding-right:5pt; }
table[rules] {border-left:solid black 0.4pt; border-right:solid black 0.4pt; }
.hline hr, .cline hr{ height : 0px; margin:0px; }
.hline td, .cline td{ padding: 0; }
.hline hr, .cline hr{border:none;border-top:1px solid black;}
.tabbing-right {text-align:right;}
div.float, div.figure {margin-left: auto; margin-right: auto;}
div.float img {text-align:center;}
div.figure img {text-align:center;}
.marginpar,.reversemarginpar {width:20%; float:right; text-align:left; margin-left:auto; margin-top:0.5em; font-size:85%; text-decoration:underline;}
.marginpar p,.reversemarginpar p{margin-top:0.4em; margin-bottom:0.4em;}
.reversemarginpar{float:left;}
table.equation {width:100%;}
.equation td{text-align:center; }
td.equation { margin-top:1em; margin-bottom:1em; } 
td.equation-label { width:5%; text-align:center; }
td.eqnarray4 { width:5%; white-space: normal; }
td.eqnarray2 { width:5%; }
table.eqnarray-star, table.eqnarray {width:100%;}
div.eqnarray{text-align:center;}
div.array {text-align:center;}
div.pmatrix {text-align:center;}
table.pmatrix {width:100%;}
span.pmatrix img{vertical-align:middle;}
div.pmatrix {text-align:center;}
table.pmatrix {width:100%;}
span.bar-css {text-decoration:overline;}
table.tabular{border-collapse: collapse; border-spacing: 0;}
img.cdots{vertical-align:middle;}
.partToc a, .partToc, .likepartToc a, .likepartToc {line-height: 200%; font-weight:bold; font-size:110%;}
.chapterToc a, .chapterToc, .likechapterToc a, .likechapterToc, .appendixToc a, .appendixToc {line-height: 200%; font-weight:bold;}
.index-item, .index-subitem, .index-subsubitem {display:block}
div.caption {text-indent:-2em; margin-left:3em; margin-right:1em; text-align:left;}
div.caption span.id{font-weight: bold; white-space: nowrap; }
h1.partHead{text-align: center}
p.bibitem { text-indent: -2em; margin-left: 2em; margin-top:0.6em; margin-bottom:0.6em; }
p.bibitem-p { text-indent: 0em; margin-left: 2em; margin-top:0.6em; margin-bottom:0.6em; }
.paragraphHead, .likeparagraphHead { margin-top:2em; font-weight: bold;}
.subparagraphHead, .likesubparagraphHead { font-weight: bold;}
.verse{white-space:nowrap; margin-left:2em}
div.maketitle {text-align:center;}
h2.titleHead{text-align:center;}
div.maketitle{ margin-bottom: 2em; }
div.author, div.date {text-align:center;}
div.thanks{text-align:left; margin-left:10%; font-size:85%; font-style:italic; }
div.abstract p {margin-left:5%; margin-right:5%;}
div.abstract {width:100%;}
.abstracttitle{text-align:center;margin-bottom:1em;}
figure.float, div.figure {margin-left: auto; margin-right: auto;}
figure.float img, figure.figure img {display: block; margin-left: auto; margin-right: auto;}
figure.figure {text-align:center;}
figcaption.caption {text-indent:-2em; margin-left:3em; margin-right:1em; text-align:center;}
figcaption.caption span.id{font-weight: bold; white-space: nowrap; }
.abstract{margin:1em;}
dt.printshorthands{float:left; clear:left; margin-right:1em;}
dd.thebibliography {margin-left: 2.5em;}
dt.thebibliography {float:left; clear:left; margin-right:1em;}
.lstlisting .label{margin-right:0.5em; }
div.lstlisting{font-family: monospace,monospace; white-space: nowrap; margin-top:0.5em; margin-bottom:0.5em; }
div.lstinputlisting{ font-family: monospace,monospace; white-space: nowrap; }
.lstinputlisting .label{margin-right:0.5em;}
.small-caps{font-variant: small-caps;}
.uline{ text-decoration:underline; }
.uuline{ text-decoration:underline; }
span.sout {text-decoration: line-through }
span.xout {text-decoration: line-through }
span.uwave {text-decoration:underline }
/* end css.sty */

</style>
</head>
<body>
<p><a href="../"><img src="images/swatips.svg" width="120" alt="SwATips" /></a>| <a href="20211220.pdf">pdf</a> | <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img src="images/by.svg" width="60" height="21" alt="CC-BY" /></a></p>
<div class='maketitle'>
                                                                                         
                                                                                         
                                                                                         
                                                                                         

<h2 class='titleHead'> <strong>Software Assurance Tips</strong><br />
A product of the Software Assurance Tips Team[<a href='#cite.0@swatips'>1</a>]<br />
</h2>
<div class='author'><span class='rm-lmr-12'>Andrea Barnes</span></div><br />
<div class='date'><span class='rm-lmr-12'>Monday 20</span><sup class='textsuperscript'><span class='rm-lmr-9'>th</span></sup><span class='rm-lmr-12'> December, 2021</span></div>
</div>
                                                                                         
                                                                                         
   
<h3 class='sectionHead'><span class='titlemark'>1   </span> <a id='x1-10001'></a>GCC as a Static Analysis Tool</h3>
<!-- l. 44 --><p class='noindent'><span class='rm-lmr-8'>Updated Wednesday 15</span><sup class='textsuperscript'><span class='rm-lmr-9'>th</span></sup><span class='rm-lmr-8'> December, 2021</span>
</p><!-- l. 1 --><p class='indent'>   A new static analysis feature has been released with GCC-10 and GCC-11. David Malcom is a Redhat Developer
on the GCC project who has implemented <span class='ec-lmtt-10'>-fanalyzer</span>: “A static analysis pass to identify various problems at
compile-time, rather than at runtime.”[<a href='#cite.0@20211220:gcc10'>2</a>] This analyzer writes security issues to the console using the
<span class='ec-lmtt-10'>-Wanalyzer </span>tag (not to be confused with the GCC -W warning flags). The output includes Common
Weakness Enumeration (CWE) identifiers as well the ability to print a path of events that trigger the
flag.
</p><!-- l. 3 --><p class='noindent'>
</p>   
<h4 class='subsectionHead'><span class='titlemark'>1.1   </span> <a id='x1-20001.1'></a>History of GCC-10 and GCC-11 Static Analyzers</h4>
<!-- l. 5 --><p class='noindent'>GCC-10 includes 15 <span class='ec-lmtt-10'>-fanalyzer </span>checkers: </p>
<ul class='itemize1'>     
<li class='itemize'><span class='ec-lmtt-10'>-Wanalyzer-double-free</span>
</li>     
<li class='itemize'><span class='ec-lmtt-10'>-Wanalyzer-use-after-free</span>
</li>     
<li class='itemize'><span class='ec-lmtt-10'>-Wanalyzer-free-of-non-heap</span>
</li>     
<li class='itemize'><span class='ec-lmtt-10'>-Wanalyzer-malloc-leak</span>
</li>     
<li class='itemize'><span class='ec-lmtt-10'>-Wanalyzer-possible-null-argument</span>
</li>     
<li class='itemize'><span class='ec-lmtt-10'>-Wanalyzer-possible-null-dereference</span>
</li>     
<li class='itemize'><span class='ec-lmtt-10'>-Wanalyzer-null-argument</span>
</li>     
<li class='itemize'><span class='ec-lmtt-10'>-Wanalyzer-null-dereference</span>
</li>     
<li class='itemize'><span class='ec-lmtt-10'>-Wanalyzer-double-fclose</span>
</li>     
<li class='itemize'><span class='ec-lmtt-10'>-Wanalyzer-file-leak</span>
</li>     
<li class='itemize'><span class='ec-lmtt-10'>-Wanalyzer-stale-setjmp-buffer</span>
</li>     
<li class='itemize'><span class='ec-lmtt-10'>-Wanalyzer-use-of-pointer-in-stale-stack-frame</span>
</li>     
<li class='itemize'><span class='ec-lmtt-10'>-Wanalyzer-unsafe-call-within-signal-handler</span>
</li>     
<li class='itemize'><span class='ec-lmtt-10'>-Wanalyzer-tainted-array-index</span>
                                                                                         
                                                                                         
     
</li>
<li class='itemize'><span class='ec-lmtt-10'>-Wanalyzer-exposure-through-output-file</span></li></ul>
<!-- l. 24 --><p class='indent'>   The checker works well on small to medium sized, C examples. An issue that Malcom noted includes bugs in the
analyzer’s state-tracking component regarding symbolic values and canonicalization to compare different states. As
these bugs were fixed, more bugs would be found. This prompted Malcom to rewrite the entire component for the
release of GCC-11.
</p><!-- l. 26 --><p class='indent'>   In the release of GCC-11, Malcom fixed the state-tracking component bugs by implementing the symbolic values
as singletons, using pointers and reducing large amounts of canonicalization code. Other features that Malcom
updated in this release include partial C++ support for <span class='ec-lmtt-10'>new </span>and <span class='ec-lmtt-10'>delete</span>, rewriting the memory leak detection to
generate fewer false positives, and fixing non-determinism logic to ensure that the analyzer’s behavior would not
vary from run to run.[<a href='#cite.0@20211220:gcc11'>3</a>]
</p><!-- l. 28 --><p class='indent'>   Additionally, GCC-11 adds 4 new <span class='ec-lmtt-10'>-fanalyzer </span>checkers: </p>
<ul class='itemize1'>     
<li class='itemize'><span class='ec-lmtt-10'>-Wanalyzer-write-to-const</span>
</li>     
<li class='itemize'><span class='ec-lmtt-10'>-Wanalyzer-write-to-string-literal</span>
</li>     
<li class='itemize'><span class='ec-lmtt-10'>-Wanalyzer-shift-count-negative</span>
</li>     
<li class='itemize'><span class='ec-lmtt-10'>-Wanalyzer-shift-count-overflow</span></li></ul>
<!-- l. 36 --><p class='indent'>   The <span class='ec-lmtt-10'>-fanalyzer </span>flag can be directly added to the GCC command in terminal or to the CFLAGS variable for
Makefiles. Ensure that GCC warnings (-W warnings) are not disabled. Disabling warnings will also cause the
fanalyzer warnings to be suppressed. Malcolm is still developing the tool and we can look forward to new updates
and a large rewrite when GCC-12 is released.
</p><!-- l. 38 --><p class='noindent'>
</p>   
<h4 class='subsectionHead'><span class='titlemark'>1.2   </span> <a id='x1-30001.2'></a>Installing GCC-11 on Ubuntu-based Distributions</h4>
<!-- l. 40 --><p class='noindent'>This install is performed on a fresh install of Linux Mint 20.1 Cinnamon with some extra checks.
</p><!-- l. 42 --><p class='noindent'>
</p>   
<h5 class='subsubsectionHead'><span class='titlemark'>1.2.1   </span> <a id='x1-40001.2.1'></a>Update Apt Repository</h5>
<!-- l. 44 --><p class='noindent'><span class='ec-lmtt-10'>$ sudo apt update &amp;&amp; sudo apt upgrade</span>
</p><!-- l. 46 --><p class='indent'>   <span class='ec-lmtt-10'>update </span>will update the list of available packages and their versions while <span class='ec-lmtt-10'>upgrade </span>will install newer versions of
the packages you already have.
</p><!-- l. 48 --><p class='noindent'>
</p>   
<h5 class='subsubsectionHead'><span class='titlemark'>1.2.2   </span> <a id='x1-50001.2.2'></a>Check if GCC-11 is Already Installable</h5>
<!-- l. 50 --><p class='noindent'><span class='ec-lmtt-10'>$ apt-cache search gcc-11</span>
</p><!-- l. 52 --><p class='indent'>   <span class='ec-lmtt-10'>apt-cache </span>will display the gcc-11 packages if they are already installable from your current repositories. If you
see them, you can skip down to Section <a href='#x1-70001.2.4'>1.2.4<!-- tex4ht:ref: sec:20211220:install  --></a> to install and configure.
                                                                                         
                                                                                         
</p><!-- l. 54 --><p class='noindent'>
</p>   
<h5 class='subsubsectionHead'><span class='titlemark'>1.2.3   </span> <a id='x1-60001.2.3'></a>Add Ubuntu Toolchain Repository</h5>
<!-- l. 56 --><p class='noindent'><span class='ec-lmtt-10'>$ add-apt-repository -y ppa:ubuntu-toolchain-r/test</span>
</p><!-- l. 58 --><p class='indent'>   Newer versions of GCC and other development packages can be found in Ubuntu’s Toolchain test branch
PPA.
</p><!-- l. 60 --><p class='indent'>   If you receive the error <span class='ec-lmtt-10'>gpg: keyserver receive failed: general error</span>, you can manually pull down the
key from the error code with the following command:<br class='newline' /><span class='ec-lmtt-10'>$ sudo apt-key adv –keyserver keyserver.ubuntu.com –recv-key KEY_FROM_ERROR</span>
</p><!-- l. 63 --><p class='indent'>   Don’t forget to run update again to update the list of available packages:<br class='newline' /><span class='ec-lmtt-10'>$ sudo apt update</span>
</p><!-- l. 66 --><p class='noindent'>
</p>   
<h5 class='subsubsectionHead'><span class='titlemark'>1.2.4   </span> <a id='x1-70001.2.4'></a>Installing and Configuring GCC</h5>
<!-- l. 69 --><p class='noindent'><span class='ec-lmtt-10'>$ sudo apt install gcc-11 &amp;&amp; sudo apt install g++-11</span>
</p><!-- l. 71 --><p class='indent'>   This is the general install command for GCC (with G++ support). To run, you can use gcc-11 when compiling,
or you can configure gcc to default to gcc-11 with the following command:<br class='newline' /><span class='ec-lmtt-10'>$ sudo update-alternatives –config gcc</span>
</p><!-- l. 74 --><p class='indent'>   This will allow you to make a selection based on the versions of gcc install. If you receive an error that there are
no alternatives, you can use the following few commands to add them manually:<br class='newline' /><span class='ec-lmtt-10'>$ sudo update-alternatives –remove-all gcc #To clean out</span><br class='newline' /><span class='ec-lmtt-10'>$ ls /usr/bin/gcc* #To see what versions you have installed</span><br class='newline' /><span class='ec-lmtt-10'>$ sudo update-alternatives –install /usr/bin/gcc gcc /usr/bin/gcc-11 10</span>
</p><!-- l. 79 --><p class='indent'>   The setup for the last command is <span class='ec-lmtt-10'>–install &lt;link&gt; &lt;name&gt; &lt;path&gt; &lt;priority&gt;</span>. Repeat the last command
for all versions of gcc listed.
                                                                                         
                                                                                         
</p>   
<h3 class='sectionHead'><a id='x1-80001.2.4'></a>References</h3>
<!-- l. 49 --><p class='noindent'>    
</p>
<dl class='thebibliography'><dt id='X0-swatips' class='thebibliography'>
[1]  
</dt><dd id='bib-1' class='thebibliography'>
<!-- l. 49 --><p class='noindent'><a id='cite.0@swatips'></a>Jon Hood, ed. SwATips. <a href='https://www.SwATips.com/' class='url'><span class='ec-lmtt-10'>https://www.SwATips.com/</span></a>.
</p>    
</dd>
<dt id='X0-20211220:gcc10' class='thebibliography'>
[2]  
</dt><dd id='bib-2' class='thebibliography'>
<!-- l. 49 --><p class='noindent'><a id='cite.0@20211220:gcc10'></a>David    Malcolm.    Static Analysis in GCC 10.    RedHat    Developer.    Mar. 26,    2020.    <span class='small-caps'>url</span>:
<a href='https://developers.redhat.com/blog/2020/03/26/static-analysis-in-gcc-10' class='url'><span class='ec-lmtt-10'>https://developers.redhat.com/blog/2020/03/26/static-analysis-in-gcc-10</span></a>.
</p>    
</dd>
<dt id='X0-20211220:gcc11' class='thebibliography'>
[3]  
</dt><dd id='bib-3' class='thebibliography'>
<!-- l. 49 --><p class='noindent'><a id='cite.0@20211220:gcc11'></a>David   Malcolm.   Static Analysis Updates in GCC 11.   RedHat   Developer.   Jan. 28,   2021.   <span class='small-caps'>url</span>:
<a href='https://developers.redhat.com/blog/2021/01/28/static-analysis-updates-in-gcc-11' class='url'><span class='ec-lmtt-10'>https://developers.redhat.com/blog/2021/01/28/static-analysis-updates-in-gcc-11</span></a>.</p></dd></dl>
 
</body> 
</html>